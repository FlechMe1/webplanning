%section.content-header
  %h1
    Familles
    %small Liste des familles
  - if can? :create, Family
    .actions
      = link_to [:new, :association, :family], class: "btn btn-flat btn-primary" do
        = fa_icon "plus"
        Ajouter

%section.content
  .box
    .box-body
      = search_form_for [:association, @q] do |f|
        .row.justify-content-center
          .col-md-4
            = f.search_field :name_cont, class: "form-control", placeholder: 'Nom...'
          .col-md-3
            %button.btn.btn-success.btn-block{type: :submit}
              = fa_icon 'search'
              Rechercher

  .box
    .box-body
      %table.table.table-bordered.table-striped.table-condensed.table-sm.mb-3
        %thead
          %tr
            %th= sort_link(@q, :name, 'Nom')
            %th Téléphone
            %th Email
            %th Adresse
            %th

        %tbody
          - @families.each do |family|
            %tr
              %td
                = link_to [:association, family] do
                  = fa_icon 'eye'
                  = family.name
              %td= family.phone_1
              %td= family.email
              %td= family.full_address
              %td
                .btn-group
                  - if can? :update, family
                    = link_to [:edit, :association, family], class: "btn btn-flat btn-success btn-sm" do
                      = fa_icon "edit"
                  - if can? :delete, family
                    = link_to [:association, family], method: :delete, data:{confirm: "Êtes vous sûr de vouloir supprimer cette famille ?"}, class: "btn btn-flat btn-danger btn-sm" do
                      = fa_icon "trash"

      = will_paginate @members, renderer: WillPaginate::ActionView::BootstrapLinkRenderer
